[[$td := .TD -]]
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>[[.TD.Data.TitledName]] Tables</title>
    <style>
        html, body, p {
            padding: 0;
            border: 0;
            margin: 0;
        }
        body {
            display: flex;
            flex-flow: column nowrap;
            justify-content: center;
            align-items: left;
            height: 100vh;
        }
        p {
            margin-left: 4rem;
            font-size: 2rem;
            color: black;
        }
        .link {
            font-size: 1rem;
        }
    </style>
</head>
<body>
    <ul>
[[- range $t := .TD.Data.Tables]]
    <li>[[$t.TitledName]] Actions:</li>
    <form id="menuForm" method="get" action="/[[$t.Name]]">
            <li>[[$t.Name]] Table</li>
            <ul>
                <li><input type=submit onclick='onCreate[[$t.TitledName]]()' value="Create Table"></li>
                <li><input type=submit onclick='onList[[$t.TitledName]]()' value="List Rows"></li>
                <li><input type=submit onclick='onRow[[$t.TitledName]]()' value="Maintain Rows"></li>
                <li><label>Add data from CSV file</label>
                    <input type=file onclick='onCsvFile[[$t.TitledName]]()' name=csvFile value="">
                    <input type=submit onclick='onCsvLoad[[$t.TitledName]]()' value="Create Table and load CSV File">
                </li>
                <li><input type=submit onclick='onLoadTest[[$t.TitledName]]()' value="Create Table and load test data"></li>
            </ul>
    </form>
    <script>
        function onCreate[[$t.TitledName]]() {
            document.getElementById("menuForm").action = "/[[$t.Name]]/table/create";
            document.getElementById("menuForm").method = "get";
        }
        function onList[[$t.TitledName]]() {
            document.getElementById("menuForm").action = "/[[$t.Name]]/list/first";
            document.getElementById("menuForm").method = "get";
        }
        function onCsvFile[[$t.TitledName]]() {
            document.getElementById("menuForm").enctype = "multipart/form-data";
        }
        function onCsvLoad[[$t.TitledName]]() {
            //document.getElementById("menuForm").enctype = "multipart/form-data";
            document.getElementById("menuForm").action  = "/[[$t.Name]]/table/load/csv";
            document.getElementById("menuForm").method  = "post";
        }
        function onLoadTest[[$t.TitledName]]() {
            document.getElementById("menuForm").action = "/[[$t.Name]]/table/load/test";
            document.getElementById("menuForm").method = "post";
        }
        function onDelete[[$t.TitledName]]() {
            [[GenFormDataKeyGet $t]]
            document.getElementById("menuForm").action = "/[[$t.Name]]/delete"+[[GenFormDataKeys $t]];
            document.getElementById("menuForm").method = "get";
        }
        function onRow[[$t.TitledName]]() {
            document.getElementById("menuForm").action = "/[[$t.Name]]/show";
            document.getElementById("menuForm").method = "get";
        }
    </script>
[[end -]]
    </ul>

</body>
</html>
